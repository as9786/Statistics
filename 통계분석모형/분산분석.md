- F분포의 사용
1. 두 모집단분산이 동일한지. t분포를 사용하여 두 모집단에 대한 평균을 검증하는데 이 때 분산을 같다고 가정. 이 가정의 타당성을 조사하기 위해 사용
2. 분산분석(Analysis of Variance:ANOVA) : 세 개 이상의 모집단평균을 비교하는에 유용
- 종속변수(dependent variable)/반응변수(response variable) : 실험자가 관심을 갖고 있는 실험의 결과와 관련된 변수
- 실험요인(experimental factor) : 실험자가 통제하는 변수, 종속변수에 영향을 미칠 것으로 판단되는 변수
- 일원배치 분산분석(one-way ANOVA) : 실험요인이 한 가지 일 때
- 이원배치 분산분석(two-way ANOVA) : 실험요인이 두 가지 일 때
- 분산분석은 각 처리에 따라 종속변수 값에 대한 평균의 차이가 있는지의 여부를 검정. 검정결과에 따라 실험요인이 종속변수에 영향을 미치는지 여부를 판단
- 분산분석에서의 가설은 c개의 모평균을 비교하고자 하는 경우 다음과 같은 일반적인 형태를 취함

![캡처](https://user-images.githubusercontent.com/80622859/183642839-8e7712bc-ea90-4e8f-b627-dcc18f929653.PNG)

- c : 처리의 수
- 귀무가설이 기각되지 않는다면 처리에 따라 종속변수의 값의 평균이 차이를 보이지 않는 것이므로 실험요인이 종속변수에 영향을 미친다고 볼 수 없음

# 1. 일원배치 분산분석

## 1. 완전무작위 실험설계(Completely Randomized Design :CRD)
- 전체 실험단위를 무작위추출방법에 의해 처리의 수만큼 나누고 그에 따라 모든 실험단위를 각 처리에 배정하는 실험설계
- 우연에 의존하지만 우연에 의한 법칙으로 설명되는 예측가능한 방법으로 분석이 이루어질 수 있음
- 실험자가 통제하는 실험요인 이외에 종속변수에 영향을 미칠 수 있는 다른 요인의 효과를 배제하기 위한 목적

### 1. 분산분석을 위한 표기법
- r : 행의 수, c : 열의 수, $X_{ij}$ : 방법 j에 의한 i번째 값
- $\bar X_c = \sum\limits_{i=1}^r X_{ic}/r$

![render](https://user-images.githubusercontent.com/80622859/183644012-ce153b90-e1b4-4723-9ddf-be462f811435.png)

### 2. 처리와 실험단위
- 실험단위 : 처리의 대상

### 3. 분산분석의 가정
- 분산분석에서 처리의 수준수가 c개 있을 경우, c개의 모집단은 서로 독립적인 정규분포를 따르며, c개의 모집단분산은 동일

### 4. 분산분석의 통계적 모형

![캡처](https://user-images.githubusercontent.com/80622859/183644341-da6c3775-eb37-47b4-b1bd-10c7ff26da33.PNG)

![캡처](https://user-images.githubusercontent.com/80622859/183644405-d527d647-050e-4e0a-ac5d-737d02cad3b1.PNG)

- $X_{ij}$는 세 가지 요소로 구성
1. 공통의 상수, $\mu$
2. 처리효과(treatment effect), $\tau$
3. 무작위 오차(random error), $\epsilon$ -> 평균이 0이고, 표준편차가 $\sigma$인 정규분포를 따른다고 가정
-  $X_{ij}$는 평균이  $\mu+ \tau$이고, 표준편차가 $\sigma$인 정규분포를 하는 모집단으로부터 추출된 표본

### 5. 실험에 대한 측정오차
- 오차항은 같은 그룹내에서도 관측값의 차이가 존재하기 때문에 필요

### 6. 분산분석의 원리
- 귀무가설이 사실이라면 표본평균 간의 차이와 각 그룹내의 관측값의 차이는 모두 표본추출과정에서 발생하는 우연한 오차(표본오차)가 되는 것
- 첫 번째 유형의 차이 : 처리간 차이. 총평균 X로부터 떨어진 표본평균의 차이 
- 두 번째 유형의 차이 : 처리내 차이, 각 처리내 개별 관측값이 그 관측값에 속해있는 처리의 표본평균으로부터 떨어진 차이
- 귀무가설이 거짓이고 각 처리의 모집단평균이 실제로 다르면, 처리간 차이는 우연한 차이(처리내 차이)보다 크게 나타남
- 처리간 차이가 처리내 차이보다 훨씬 크다면 귀무가설을 기각하고 실험요인이 종속변수에 영향을 미친다고 말할 수 있음

### 7. 제곱합(Sum of Squares: SS)와 제곱평균(Mean Square: MS)
- 제곱합(변동,variation) : 관측값과 평균의 차이를 제곱하여 더해줌.

![render (1)](https://user-images.githubusercontent.com/80622859/183645931-9f1065d4-97b2-43a9-a7f8-30ce3bd51695.png)

- 제곱평균 : 제곱합을 자유도로 나누어 준 값

![render (2)](https://user-images.githubusercontent.com/80622859/183646014-53824dd8-5732-4b87-b0e9-b102c1a8a92a.png)

### 8. 처리간 제곱합(Sum of Squares Between Treatments : SSB)

![캡처](https://user-images.githubusercontent.com/80622859/183646111-f2b8c674-16f4-4735-b7ed-cedbaf537417.PNG)

### 9. 처리내 제곱합(Sum of Squares due to Error :SSE, Sum of Squares Within Treatment : SSW)
- 개별 관측값이 각 처리평균으로부터 떨어진 차이를 측정하는 것

![캡처](https://user-images.githubusercontent.com/80622859/183646316-ad9ddf1c-581b-46d7-b654-8d490dbf7acc.PNG)

### 10. 총제곱합(Sum of Squares Total : SST)
- 개별관측값이 총평균으로부터 떨어진 차이

![캡처](https://user-images.githubusercontent.com/80622859/183646612-7cf42616-bf42-43f8-bbf0-77ee0ca681ce.PNG)

- 총제곱합 = 처리간 제곱합 + 처리내 제곱합
- 가설의 검정에서는 처리간 제곱합과 처리내 제곱합만을 알면 되지만 총제곱합을 구함으로써 계산과정을 확인할 수 있음
- 처리간 제곱합과 처리내 제곱합의 차이가 크게 없다면 귀무가설을 기각하지 못하고, 큰 차이가 난다면 귀무가설을 기각한다
- 하지만 처리간 제곱합과 처리내 제곱합은 직접 비교할 수 있는 수치가 아님(자유도가 다름)
- 그래서 자유도로 나눈 값을 비교

### 11. 자유도와 제곱평균
- 처리간 제곱합의 자유도 : c-1
- 처리내 제곱합의 자유도 : c(r-1)
- 총제곱합의 자유도 : rc-1
- rc-1 = (c-1) + c(r-1)

### 12. 분산분석표(ANOVA Table)
- 분산분석의 결과를 효과적으로 설명하기 위함
- F 값 = 처리간 제곱평균/처리내 제곱평균
- 잔차(residual) = 처리내 평균값과 처리내 관측값과의 차이, 표본결과로부터 관측된 오차의 개념
- 처리내 변동원인(오차) : 처리내 차이

![캡처](https://user-images.githubusercontent.com/80622859/183656496-09f01c4c-4f88-4c52-b443-ffbda447a705.PNG)

![캡처](https://user-images.githubusercontent.com/80622859/183656563-a07142a5-188a-43e8-a3ee-41054a8ddb91.PNG)

### 13. F 통계량
- 검정통계량 : F = MSB/MSE
- F 값은 귀무가설이 참일 경우 F분포(분자자유도, 분모자유도)를 함
- 분자자유도는 MSB와 관련 = c-1
- 분모자유도는 MSE와 관련 = c(r-1)
- 귀무가설이 참이라면 F값은 1에 가까워짐
- F값이 1보다 매우 크다면 처리에 따라 차이가 있는 것이므로 각 처리의 모집단평균이 다르다고 판단하고 귀무가설 기각
- 유의수준에 맞춰서 F 값의 임계값을 계산해야함

## 2. 표본의 크기가 다른 경우
- 각 처리내의 표본의 크기가 다를 수도 있음
- 표본의 크기가 너무 적으면 안됨 => 제 2종 오류의 위험이 증가

# 2. 이원배치 분산분석
- 우연한 오차로 간주되는 처리내 차이로부터 다른 실험요인에 의한 차이를 분리해 내어 처리내 변동을 작게 하고, 이를 통해 우연한 오차를 정확히 규명하고자 하는 것
- 두 가지 기본적인 형태의 실험 설계
1. 무작위블록설계(Randomized Block Design : RBD)
2. 완전무작위설계

## 1. 무작위블록설계
- 블록 : 표본을 비슷한 성질을 갖는 몇 개의 그룹으로 나눈 것
- 블록내의 실험단위는 동질적인 특성을 가짐
- ex) 학생의 시험성적이 평균학점에 따라서 크게 달라진다고 판단되면 평균학점의 수준에 따라 학생을 몇 개의 그룹으로 묶어서 조사하는 것이 우연에 의한 오차를 줄일 수 있는 방법
- 처리간 차이를 보다 명확하게 규명하기 위해 사용

### 1. 이원배치 분산분석 모형

![캡처](https://user-images.githubusercontent.com/80622859/183659844-fc5d0732-2510-42ef-91bd-7b81b1d55977.PNG)

- c : 처리, r : 블록 N=cr : 관측값

![캡처](https://user-images.githubusercontent.com/80622859/183660094-1019a0b5-7d39-4ced-9b83-8891f5e38e3f.PNG)

### 2. 이원배치 분산분석의 가설 설정
- 블록간 제곱합(Sum of Squares dut to Blocking Factors : SSBL ) : 블록효과에 의한 차이를 나타냄

### 3. 변동의 분해

![캡처](https://user-images.githubusercontent.com/80622859/183660512-5f5e177d-83af-495d-9e0b-4aa783d535b6.PNG)

- SSB의 자유도 : c-1, SSBL의 자유도 : r-1, SSE의 자유도 : (c-1)(r-1), 총제곱합의 자유도 : rc-1

![캡처](https://user-images.githubusercontent.com/80622859/183660849-f7584418-ee4a-46c1-9401-45fef6ddd27a.PNG)

- 일원배치분산분석에서보다 낮은 유의수준에서도 여유있게 귀무가설을 기각할 수 있음
- 블록효과에 대한 통계적 검증도 가능 하지만 분산분석의 목적이 아니므로 관심의 대상이 아님



## 2. 완전무작위설계
- 실험단위에 대한 실험요인의 할당을 무작위로 결정하는 실험설계방법
- 무작위블록설계에서는 하나의 실험요인이 종속변수에 영향을 미치는지의 여부를 판단
- 완전무작위설계는 우리가 고려하는 두 개의 실험요인 각각이 종속변수에 영향을 미치는지 판단

## 3. 상호작용을 갖는 이원배치 분산분석
- 위의 이원배치 분산분석모형은 가법적(additive)
- 즉, 요인 A의 효과는 요인 B의 수준에 관계없이 일정한 양만큼 증가하거나 감소한다는 것
- 두 실험요인간에 상호작용(interaction)이 있을지도 모름
- 두 상호작용을 조사하기 위해서는 교수와 교수법의 조합에 할당되는 반복수(관측치의 수)가 2 이상이어야 함
- 상호작용효과(interaction effect)에 대한 가설검정을 우선적으로 고려해야 함
- 상호작용효과가 존재한다면 두 가지 요인인 교수법과 교수에 대한 가설검정은 의미가 없어짐
- 위의 경우 개별적으로 교수법의 효과를 검정해야 함
- 특정요인의 효과가 있느냐 없느냐를 검정하는 것보다는 한 요인의 특정수준에 대하여 다른 요인의 효과를 고려하는 것이 바람직한 분석방법




